<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Программирование на kavaScript с Нуля до Гуру 2.0</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="Изучаем kavaScript." />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">  <!-- для адаптивности сайта -->
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />  <!-- совместимость с браузером EDGE -->
	<script>
        "use strict";
        const Http = new XMLHttpRequest();
        const url='https://10.58.88.70/api/webgui/v1/alarms/show/active';   // https://10.58.88.70/api/webgui/v1/system/alarms/summary_detailed    or other API link 
            //   https://10.58.82.21/nsi/api/equipment/5171/equipmentPlanned
            //  https://10.58.82.21/nsa/api/v1/alarms/device-types
        Http.open("GET", url);
        Http.send();
        Http.onreadystatechange = (e) => {
          console.log(Http.responseText)
          // Http.onreadystatechange = (e) => {   // get json
          // let jsonResponce = Http.responseText;    // send response to variable
          // console.log(jsonResponce);
        }


        //  Browsers (and Dashcode) provide an XMLHttpRequest object which can be used to make HTTP requests from JavaScript:
        function httpGet(theUrl){
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    return xmlHttp.responseText;
}
    // However, synchronous requests are discouraged and will generate a warning along the lines of:
        // Note: Starting with Gecko 30.0 (Firefox 30.0 / Thunderbird 30.0 / SeaMonkey 2.27), synchronous requests on the main 
        // thread have been deprecated due to the negative effects to the user experience.

      // You should make an asynchronous request and handle the response inside an event handler.
      function httpGetAsync(theUrl, callback)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() { 
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
    }
    xmlHttp.open("GET", theUrl, true); // true for asynchronous 
    xmlHttp.send(null);
}


       // Short and clean:
        const http = new XMLHttpRequest() 
http.open("GET", "https://api.lyrics.ovh/v1/toto/africa")
http.send()
http.onload = () => console.log(http.responseText)


// A copy-paste modern version ( using fetch and arrow function ) :
//Option with catch        
fetch( textURL )
   .then(async r=> console.log(await r.text()))
   .catch(e=>console.error('Boo...' + e));

//No fear...
(async () =>
    console.log(
            (await (await fetch( jsonURL )).json())
            )
)();


//  Modern, clean and shortest
fetch('https://www.randomtext.me/api/lorem')



</script>   
</head>
</html>